(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9aa4d2cc"],{1675:function(t,e,o){"use strict";o("2abc")},"2abc":function(t,e,o){},"9c93":function(t,e,o){"use strict";o.r(e);o("b0c0");var n=o("7a23"),c=function(t){return Object(n["C"])("data-v-a0d38d04"),t=t(),Object(n["A"])(),t},s={class:"container posts"},i={class:"pos_1"},a={class:"posterName"},r={class:"post-edit-div"},l=["onClick","onBlur"],u={class:"post-edit-btn"},d={class:"dropDonw-List-Ul"},h=["onClick"],b=c((function(){return Object(n["h"])("li",{style:{}},"刪除",-1)})),p=[b],m=c((function(){return Object(n["h"])("li",{style:{}},"編輯",-1)})),f=[m],O={class:"pos_2 content"},j={class:"pos_3"},k=["src"],g={class:"pos_4"},v=["onClick"],y={class:"pos_5"},w={class:"pos_1"},L={class:"comment-form"},U=["onUpdate:modelValue"],I=["onClick"],_=c((function(){return Object(n["h"])("div",{class:"comment-form-btn"},[Object(n["h"])("h4",null,"留言")],-1)})),C=[_],D={class:"pos_6_HeadName"},A={class:"posterName"},P={class:"postComment"},z={class:"loadingBackground"},x={class:"loading"},K=c((function(){return Object(n["h"])("div",{class:"lds-circle"},[Object(n["h"])("div")],-1)})),T=[K];function H(t,e,o,c,b,m){var _=Object(n["H"])("router-link"),K=Object(n["H"])("unicon");return Object(n["z"])(),Object(n["g"])("div",s,[(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(b.posts,(function(o){return Object(n["z"])(),Object(n["g"])("div",{key:o,class:"post"},[Object(n["h"])("div",i,[Object(n["j"])(_,{class:"",to:"/personal-wall/".concat(o.user._id)},{default:Object(n["U"])((function(){return[Object(n["h"])("div",{class:"postHeadImg",style:Object(n["t"])([{"background-image":"url("+o.user.photo+")"},{"background-size":"cover","background-position":"center",overflow:"hidden"}])},null,4)]})),_:2},1032,["to"]),Object(n["h"])("div",a,[Object(n["h"])("h3",null,Object(n["K"])(o.user.name),1),Object(n["h"])("h5",null,Object(n["K"])(o.createdAt),1)]),Object(n["h"])("div",r,[Object(n["h"])("a",{type:"button",class:"post-edit-A",href:"#",onClick:Object(n["W"])((function(e){o.isDropDown=!t.isDropDown}),["prevent"]),onBlur:function(t){return m.closeDropDown(o)}},[Object(n["h"])("div",u,[Object(n["j"])(K,{name:"ellipsis-h",fill:["black"]})])],40,l),o.isDropDown?(Object(n["z"])(),Object(n["e"])(n["b"],{key:0,name:"fade",class:"dropDown-List"},{default:Object(n["U"])((function(){return[Object(n["h"])("ul",d,[Object(n["h"])("a",{type:"button",class:"",href:"#",onClick:Object(n["W"])((function(e){return t.deletePost(o)}),["prevent"])},p,8,h),Object(n["h"])("a",{type:"button",class:"",href:"#",onClick:e[0]||(e[0]=Object(n["W"])((function(){}),["prevent"]))},f)])]})),_:2},1024)):Object(n["f"])("",!0)])]),Object(n["h"])("div",O,[Object(n["h"])("h4",null,Object(n["K"])(o.content),1)]),Object(n["h"])("div",j,[Object(n["h"])("img",{src:o.image},null,8,k)]),Object(n["h"])("div",g,[Object(n["h"])("a",{type:"button",class:"thumbs-up-A",href:"#",onClick:Object(n["W"])((function(t){return m.addLikeOrDeleteLike(o)}),["prevent"])},[Object(n["j"])(K,{class:"thumbs-up",name:"thumbs-up",fill:[o.isLikeClicked?"royalblue":"#a6a6a6"]},null,8,["fill"])],8,v),Object(n["h"])("div",null,"  "+Object(n["K"])(o.likes),1)]),Object(n["h"])("div",y,[Object(n["h"])("div",w,[Object(n["h"])("div",{class:"postHeadImg",style:Object(n["t"])([{"background-image":"url("+b.myUserInformation.photo+")"},{width:"3.5em","padding-top":"3.5em","background-size":"cover","background-position":"center",overflow:"hidden"}])},null,4)]),Object(n["h"])("div",L,[Object(n["V"])(Object(n["h"])("input",{type:"text",class:"comment-form-text","onUpdate:modelValue":function(t){return o.comment.text=t},placeholder:"輸入留言..."},null,8,U),[[n["P"],o.comment.text]]),Object(n["h"])("a",{type:"button",class:"comment-form-A",href:"#",onClick:Object(n["W"])((function(t){return m.addComment(o)}),["prevent"])},C,8,I)])]),(Object(n["z"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(o.commentDetail,(function(t){return Object(n["z"])(),Object(n["g"])("div",{class:"pos_6",key:t},[Object(n["h"])("div",D,[Object(n["h"])("a",{type:"button",class:"",href:"#",onClick:e[1]||(e[1]=Object(n["W"])((function(){}),["prevent"]))},[Object(n["h"])("div",{class:"postHeadImg",style:Object(n["t"])([{width:"3.5em","padding-top":"3.5em","background-size":"cover","background-position":"center",overflow:"hidden"},{"background-image":"url("+t.user.photo+")"}])},null,4)]),Object(n["h"])("div",A,[Object(n["h"])("h3",null,Object(n["K"])(t.user.name),1),Object(n["h"])("h5",null,Object(n["K"])(t.updatedAt),1)])]),Object(n["h"])("div",P,[Object(n["h"])("h4",null,Object(n["K"])(t.content),1)])])})),128))])})),128)),Object(n["V"])(Object(n["h"])("div",z,null,512),[[n["Q"],b.isLoading]]),Object(n["V"])(Object(n["h"])("div",x,T,512),[[n["Q"],b.isLoading]])])}var W=o("3835"),V=o("1da1"),$=(o("96cf"),o("ac1f"),o("5319"),o("99af"),o("1276"),o("caad6"),o("2532"),o("d3b7"),o("159b"),o("4de4"),o("bc3a")),B=o.n($),M={data:function(){return{isLoading:!1,posts:[],myUserId:"",myUserInformation:{}}},mounted:function(){this.userTokenCheck(this.getMyUserInformation),this.getPost()},methods:{closeDropDown:function(t){setTimeout((function(){t.isDropDown=!1}),80)},userTokenCheck:function(t){var e=this,o="".concat("https://blooming-sands-85089.herokuapp.com","/user/auth-check"),n=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),c="Bearer ".concat(n);B.a.defaults.headers.common.Authorization=c,B.a.post(o).then((function(o){e.myUserId=o.data.userId,void 0!==t&&t()})).catch((function(){e.$router.push("/login")}))},getMyUserInformation:function(){var t=this,e=this.myUserId,o="".concat("https://blooming-sands-85089.herokuapp.com","/users/").concat(e);console.log(o),B.a.get(o).then((function(e){var o=e.data.datas,n=o._id,c=o.photo;t.myUserInformation={_id:n,photo:c}})).catch((function(){}))},getPost:function(){var t=this;this.isLoading=!0;var e=this.$route.params.id,o="".concat("https://blooming-sands-85089.herokuapp.com","/posts/").concat(e);B.a.get(o).then(function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(o){var n,c,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.data.datas,n.createdAt_Original=n.createdAt,c=n.createdAt.split("T"),s=Object(W["a"])(c,1),i=s[0],n.createdAt=i,n.isLikeClicked=n.whoLikes.includes(t.myUserId),e.next=7,n.commentDetail.forEach((function(t){t.updatedAt_Original=n.updatedAt;var e=t.updatedAt.split("T"),o=Object(W["a"])(e,1),c=o[0];t.updatedAt=c}));case 7:n.comment={text:""},n.isDropDown=!1,t.posts.push(n),setTimeout((function(){t.isLoading=!1}),20);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){console.dir(t)}))},addUserLikePost:function(t){var e=this,o=t,n=o._id,c="".concat("https://blooming-sands-85089.herokuapp.com","/users/").concat(this.myUserId);this.myUserInformation.likePosts.push(n);var s={likePosts:this.myUserInformation.likePosts};B.a.patch(c,s).then((function(t){console.log(t),e.getMyUserInformation()})).catch((function(t){console.log(t)}))},addLike:function(t){this.addUserLikePost(t);var e=t,o=this.myUserId,n=e._id,c="".concat("https://blooming-sands-85089.herokuapp.com","/posts/").concat(n),s=e;s.likes+=1,e.isLikeClicked=!0,e.whoLikes.push(o);var i={likes:e.likes,whoLikes:e.whoLikes};B.a.patch(c,i).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},deleteUserLikePost:function(t){var e=this,o=t,n=o._id,c="".concat("https://blooming-sands-85089.herokuapp.com","/users/").concat(this.myUserId);this.myUserInformation.likePosts=this.myUserInformation.likePosts.filter((function(t){return t!==n}));var s={likePosts:this.myUserInformation.likePosts};B.a.patch(c,s).then((function(t){console.log(t),e.getMyUserInformation()})).catch((function(t){console.log(t)}))},deleteLike:function(t){this.deleteUserLikePost(t);var e=t,o=this.myUserId,n=e._id,c="".concat("https://blooming-sands-85089.herokuapp.com","/posts/").concat(n),s=e;s.likes-=1,e.isLikeClicked=!1,e.whoLikes=e.whoLikes.filter((function(t){return t!==o}));var i={likes:e.likes,whoLikes:e.whoLikes};B.a.patch(c,i).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},addLikeOrDeleteLike:function(t){t.isLikeClicked?this.deleteLike(t):this.addLike(t)},addComment:function(t){var e=this,o=this.myUserInformation._id,n=t._id,c="".concat("https://blooming-sands-85089.herokuapp.com","/postAddComment/").concat(n),s={user:o,content:t.comment.text};B.a.post(c,s).then((function(o){console.log(o.data.data),e.addCommentNum(t),e.getPosts()})).catch((function(t){console.log(t)}))}}},N=(o("1675"),o("d959")),G=o.n(N);const J=G()(M,[["render",H],["__scopeId","data-v-a0d38d04"]]);e["default"]=J}}]);
//# sourceMappingURL=chunk-9aa4d2cc.50cbf8ee.js.map