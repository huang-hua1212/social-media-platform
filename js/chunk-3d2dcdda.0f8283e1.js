(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d2dcdda"],{"26c1":function(t,e,n){"use strict";n("67ee")},3891:function(t,e,n){"use strict";n.r(e);var c=n("7a23"),i=function(t){return Object(c["C"])("data-v-4a5663a2"),t=t(),Object(c["A"])(),t},s={class:"container createPosts"},a={class:"createPost"},o={class:"pos_1"},d={class:"above"},u={class:"above-title"},r=Object(c["i"])("張貼動態"),h=i((function(){return Object(c["h"])("div",{class:"under"},null,-1)})),l={class:"pos_2"},b={class:"createForm"},O=i((function(){return Object(c["h"])("h4",null,"貼文內容",-1)})),p={class:"imgUpload-Div"},v={for:"fileUpload",class:"imgUpload-A"},j=i((function(){return Object(c["h"])("span",{class:"me-2"},"上傳圖片",-1)})),m={class:"imgDisplay"},f=["src"],g={class:"sendOutDiv"},k={class:"loadingBackground"},A={class:"loading"},B=i((function(){return Object(c["h"])("div",{class:"lds-spinner"},[Object(c["h"])("div"),Object(c["h"])("div"),Object(c["h"])("div"),Object(c["h"])("div"),Object(c["h"])("div"),Object(c["h"])("div"),Object(c["h"])("div"),Object(c["h"])("div"),Object(c["h"])("div"),Object(c["h"])("div"),Object(c["h"])("div"),Object(c["h"])("div")],-1)})),w=[B];function U(t,e,n,i,B,U){var C=Object(c["H"])("h");return Object(c["z"])(),Object(c["g"])("div",s,[Object(c["h"])("div",a,[Object(c["h"])("div",o,[Object(c["h"])("div",d,[Object(c["h"])("div",u,[Object(c["j"])(C,null,{default:Object(c["U"])((function(){return[r]})),_:1})])]),h]),Object(c["h"])("div",l,[Object(c["h"])("div",b,[O,Object(c["V"])(Object(c["h"])("textarea",{placeholder:"輸入你的貼文內容","onUpdate:modelValue":e[0]||(e[0]=function(t){return B.textContent=t}),onKeyup:e[1]||(e[1]=Object(c["W"])((function(){return U.isSendOutBtnActive&&U.isSendOutBtnActive.apply(U,arguments)}),["prevent"]))},null,544),[[c["P"],B.textContent]]),Object(c["h"])("div",p,[Object(c["h"])("label",v,[j,Object(c["h"])("input",{id:"fileUpload",type:"file",ref:"files",onChange:e[2]||(e[2]=Object(c["W"])((function(t){return U.uploadImage(t)}),["prevent"]))},null,544)])]),Object(c["V"])(Object(c["h"])("div",m,[Object(c["h"])("img",{src:this.imgs[0]},null,8,f)],512),[[c["Q"],B.imgs.length]]),Object(c["h"])("div",g,[Object(c["h"])("a",{class:Object(c["s"])({"sendOutA-Disable":!B.sendOutBtnActive}),type:"button",href:"#",onClick:e[3]||(e[3]=Object(c["W"])((function(t){return U.postNewPo()}),["prevent"]))},[Object(c["h"])("div",{class:Object(c["s"])(["sendOutBtn",{"sendOutBtn-Active":B.sendOutBtnActive}])}," 送出貼文 ",2)],2)])])])]),Object(c["V"])(Object(c["h"])("div",k,null,512),[[c["Q"],B.isLoading]]),Object(c["V"])(Object(c["h"])("div",A,w,512),[[c["Q"],B.isLoading]])])}n("ac1f"),n("5319"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861");var C=n("bc3a"),y=n.n(C),I={data:function(){return{textContent:"",imgFile:{},imgs:[],sendOutBtnActive:!1,isLoading:!1,myUserId:""}},components:{},mounted:function(){this.userTokenCheck()},methods:{userTokenCheck:function(t){var e=this,n="".concat("https://blooming-sands-85089.herokuapp.com","/user/auth-check"),c=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),i="Bearer ".concat(c);y.a.defaults.headers.common.Authorization=i,y.a.post(n).then((function(n){e.myUserId=n.data.userId,void 0!==t&&t()})).catch((function(){e.$router.push("/login")}))},isSendOutBtnActive:function(){this.textContent&&this.imgs.length>0?this.sendOutBtnActive=!0:this.sendOutBtnActive=!1},postNewPo:function(){var t=this;this.isLoading=!0;var e=new FormData;e.append("user",this.myUserId),e.append("tags","分享"),e.append("type","person"),e.append("image",this.imgFile),e.append("content",this.textContent),y.a.post("https://blooming-sands-85089.herokuapp.com/posts/with-FormDataImage",e).then((function(){t.isLoading=!1,t.$router.push("/posts-with-comments")})).catch((function(t){console.dir(t)}))},uploadImage:function(t){var e=t.target.files[0];this.imgFile=e;var n=URL.createObjectURL(e);this.imgs=[],this.imgs.push(n),this.isSendOutBtnActive()}}},x=(n("26c1"),n("d959")),L=n.n(x);const D=L()(I,[["render",U],["__scopeId","data-v-4a5663a2"]]);e["default"]=D},"67ee":function(t,e,n){}}]);
//# sourceMappingURL=chunk-3d2dcdda.0f8283e1.js.map