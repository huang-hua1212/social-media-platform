{"version":3,"sources":["webpack:///./src/components/CreatePost.vue?92fa","webpack:///./src/components/CreatePost.vue","webpack:///./src/components/CreatePost.vue?5da4"],"names":["class","_createElementVNode","for","_hoisted_19","_createElementBlock","_createVNode","_component_h","_hoisted_7","_hoisted_10","placeholder","$data","$event","onKeyup","$options","_hoisted_13","id","type","ref","onChange","src","imgs","length","href","onClick","_hoisted_20","data","textContent","imgFile","sendOutBtnActive","isLoading","myUserId","components","mounted","this","userTokenCheck","methods","next","url","process","token","document","cookie","replace","bearerToken","axios","defaults","headers","common","Authorization","post","then","res","userId","undefined","catch","$router","push","isSendOutBtnActive","postNewPo","FormData","append","err","console","dir","uploadImage","e","fileObject","target","files","URL","createObjectURL","__exports__","render"],"mappings":"kHAAA,W,6ICCOA,MAAM,yB,GACJA,MAAM,c,GACJA,MAAM,S,GACJA,MAAM,S,GACJA,MAAM,e,iBAAiB,Q,uBAE9BC,eAAyB,OAApBD,MAAM,SAAO,Y,GAEfA,MAAM,S,GACJA,MAAM,c,uBACTC,eAAa,UAAT,QAAI,M,GAMHD,MAAM,iB,GACFE,IAAI,aAAaF,MAAM,e,uBAC3BC,eAA8B,QAAxBD,MAAM,QAAO,QAAI,M,GASFA,MAAM,c,aAG3BA,MAAM,c,GAgBOA,MAAM,qB,GACNA,MAAM,W,uBAC5BC,eAaM,OAbDD,MAAM,eAAa,CACtBC,eAAW,OACXA,eAAW,OACXA,eAAW,OACXA,eAAW,OACXA,eAAW,OACXA,eAAW,OACXA,eAAW,OACXA,eAAW,OACXA,eAAW,OACXA,eAAW,OACXA,eAAW,OACXA,eAAW,SAZb,M,GAAAE,G,0EAhDJC,eA+DM,MA/DN,EA+DM,CA9DJH,eA2CM,MA3CN,EA2CM,CA1CJA,eAKM,MALN,EAKM,CAJJA,eAEM,MAFN,EAEM,CADJA,eAA0C,MAA1C,EAA0C,CAAjBI,eAAWC,EAAA,M,wBAAR,iBAAI,O,UAElCC,IAEFN,eAmCM,MAnCN,EAmCM,CAlCJA,eAiCM,MAjCN,EAiCM,CAhCJO,EAgCI,eA/BJP,eAIY,YAHVQ,YAAY,W,qDACHC,cAAWC,IACnBC,QAAK,8CAAUC,gEAAkB,eAHpC,mBAEWH,iBAGXT,eAUM,MAVN,EAUM,CATJA,eAQQ,QARR,EAQQ,CAPLa,EACDb,eAKE,SAJAc,GAAG,aACHC,KAAK,OACLC,IAAI,QACHC,SAAM,+CAAUL,cAAYF,KAAM,eAJrC,cAuBA,eAfJV,eAEM,MAFN,EAEM,CADJA,eAA2B,OAArBkB,IAAG,KAAOC,KAAI,IAApB,WADF,cAAaV,OAAKW,UAGlBpB,eAWM,MAXN,EAWM,CATJA,eAQC,KAPED,MAAK,oCAAyBU,qBAC/BM,KAAK,SACLM,KAAK,IACJC,QAAK,+CAAUV,gBAAS,eAJ3B,CAKGZ,eAEK,OAFAD,MAAK,gBAAC,aAAY,qBAAgCU,uBAAoB,SAE5E,IAPF,WA+BJ,eAjBJT,eAAwD,MAAxD,EAAwD,mBAA3CS,eAiBT,eAhBJT,eAeM,MAfN,EAeMuB,EAAA,cAfOd,iB,+FA0BF,GACbe,KADa,WAEX,MAAO,CACLC,YAAa,GACbC,QAAS,GACTP,KAAM,GAGNQ,kBAAkB,EAClBC,WAAW,EACXC,SAAU,KAGdC,WAAY,GAGZC,QAhBa,WAiBXC,KAAKC,kBAEPC,QAAS,CACPD,eADO,SACQE,GAAM,WACbC,EAAE,UAAOC,6CAAP,oBACFC,EAAQC,SAASC,OAAOC,QAAQ,iDAAkD,MAClFC,EAAU,iBAAcJ,GAC9BK,IAAMC,SAASC,QAAQC,OAAOC,cAAgBL,EAC9CC,IACGK,KAAKZ,GACLa,MAAK,SAACC,GACL,EAAKrB,SAAWqB,EAAI1B,KAAK2B,YACZC,IAATjB,GACFA,OAGHkB,OAAM,WACL,EAAKC,QAAQC,KAAK,cAGxBC,mBAlBO,WAmBDxB,KAAKP,aAAeO,KAAKb,KAAKC,OAAS,EACzCY,KAAKL,kBAAmB,EAExBK,KAAKL,kBAAmB,GAG5B8B,UAzBO,WAyBK,WACVzB,KAAKJ,WAAY,EACjB,IAAMJ,EAAO,IAAIkC,SACjBlC,EAAKmC,OAAO,OAAQ3B,KAAKH,UACzBL,EAAKmC,OAAO,OAAQ,MACpBnC,EAAKmC,OAAO,OAAQ,UACpBnC,EAAKmC,OAAO,QAAS3B,KAAKN,SAC1BF,EAAKmC,OAAO,UAAW3B,KAAKP,aAC5BkB,IACGK,KAAK,sEAAuExB,GAC5EyB,MAAK,WACJ,EAAKrB,WAAY,EACjB,EAAK0B,QAAQC,KAAK,2BAEnBF,OAAM,SAACO,GACNC,QAAQC,IAAIF,OAGlBG,YA3CO,SA2CKC,GACV,IAAMC,EAAaD,EAAEE,OAAOC,MAAM,GAClCnC,KAAKN,QAAUuC,EACf,IAAM7B,EAAMgC,IAAIC,gBAAgBJ,GAChCjC,KAAKb,KAAO,GACZa,KAAKb,KAAKoC,KAAKnB,GACfJ,KAAKwB,wB,iCCvIX,MAAMc,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB","file":"js/chunk-3d2dcdda.0f8283e1.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CreatePost.vue?vue&type=style&index=0&id=4a5663a2&lang=scss&scoped=true\"","<template>\n  <div class=\"container createPosts\">\n    <div class=\"createPost\">\n      <div class=\"pos_1\">\n        <div class=\"above\">\n          <div class=\"above-title\"><h>張貼動態</h></div>\n        </div>\n        <div class=\"under\"></div>\n      </div>\n      <div class=\"pos_2\">\n        <div class=\"createForm\">\n          <h4>貼文內容</h4>\n          <textarea\n            placeholder=\"輸入你的貼文內容\"\n            v-model=\"textContent\"\n            @keyup.prevent=\"isSendOutBtnActive\"\n          ></textarea>\n          <div class=\"imgUpload-Div\">\n            <label for=\"fileUpload\" class=\"imgUpload-A\"\n              ><span class=\"me-2\">上傳圖片</span>\n              <input\n                id=\"fileUpload\"\n                type=\"file\"\n                ref=\"files\"\n                @change.prevent=\"uploadImage($event)\"\n              />\n            </label>\n          </div>\n          <div v-show=\"imgs.length\" class=\"imgDisplay\">\n            <img :src=\"this.imgs[0]\" />\n          </div>\n          <div class=\"sendOutDiv\">\n            <!-- class=\"sendOutA\" -->\n            <a\n              :class=\"{ 'sendOutA-Disable': !sendOutBtnActive }\"\n              type=\"button\"\n              href=\"#\"\n              @click.prevent=\"postNewPo()\"\n              ><div class=\"sendOutBtn\" :class=\"{ 'sendOutBtn-Active': sendOutBtnActive }\">\n                送出貼文\n              </div></a\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- ProgressBar Loading -->\n    <div v-show=\"isLoading\" class=\"loadingBackground\"></div>\n    <div v-show=\"isLoading\" class=\"loading\">\n      <div class=\"lds-spinner\">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n    </div>\n  </div>\n  <!-- Progress bar -->\n  <!-- <div style=\"position: relative\">\n    <loading v-model:active=\"isLoading\" :can-cancel=\"true\" :is-full-page=\"true\" />\n  </div> -->\n  <!-- <div class=\"loading\"></div> -->\n</template>\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      textContent: '',\n      imgFile: {},\n      imgs: [\n        // 'https://images.unsplash.com/photo-1518805660775-eb21eab50e1e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1331&q=80',\n      ],\n      sendOutBtnActive: false,\n      isLoading: false,\n      myUserId: '',\n    };\n  },\n  components: {\n    // Loading,\n  },\n  mounted() {\n    this.userTokenCheck();\n  },\n  methods: {\n    userTokenCheck(next) {\n      const url = `${process.env.VUE_APP_API}/user/auth-check`;\n      const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n      const bearerToken = `Bearer ${token}`;\n      axios.defaults.headers.common.Authorization = bearerToken;\n      axios\n        .post(url)\n        .then((res) => {\n          this.myUserId = res.data.userId;\n          if (next !== undefined) {\n            next();\n          }\n        })\n        .catch(() => {\n          this.$router.push('/login');\n        });\n    },\n    isSendOutBtnActive() {\n      if (this.textContent && this.imgs.length > 0) {\n        this.sendOutBtnActive = true;\n      } else {\n        this.sendOutBtnActive = false;\n      }\n    },\n    postNewPo() {\n      this.isLoading = true;\n      const data = new FormData();\n      data.append('user', this.myUserId); // 主使用者\n      data.append('tags', '分享');\n      data.append('type', 'person');\n      data.append('image', this.imgFile);\n      data.append('content', this.textContent);\n      axios\n        .post('https://blooming-sands-85089.herokuapp.com/posts/with-FormDataImage', data)\n        .then(() => {\n          this.isLoading = false;\n          this.$router.push('/posts-with-comments');\n        })\n        .catch((err) => {\n          console.dir(err);\n        });\n    },\n    uploadImage(e) {\n      const fileObject = e.target.files[0];\n      this.imgFile = fileObject;\n      const url = URL.createObjectURL(fileObject);\n      this.imgs = [];\n      this.imgs.push(url);\n      this.isSendOutBtnActive();\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n// loading Circle start\n.loadingBackground {\n  position: fixed;\n  padding: 0;\n  margin: 0;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 200;\n  background: gray;\n  opacity: 0.5;\n}\n.loading {\n  position: fixed;\n  width: 100px;\n  height: 100px;\n  left: 50%;\n  top: 50%;\n  margin-left: -50px; /* 100px/2 = 50px */\n  margin-top: -50px; /* ditto */\n  z-index: 201;\n}\n.lds-spinner {\n  color: official;\n  // display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n.lds-spinner div {\n  transform-origin: 40px 40px;\n  animation: lds-spinner 1.2s linear infinite;\n}\n.lds-spinner div:after {\n  content: ' ';\n  display: block;\n  position: absolute;\n  top: 3px;\n  left: 37px;\n  width: 6px;\n  height: 18px;\n  border-radius: 20%;\n  background: black;\n}\n.lds-spinner div:nth-child(1) {\n  transform: rotate(0deg);\n  animation-delay: -1.1s;\n}\n.lds-spinner div:nth-child(2) {\n  transform: rotate(30deg);\n  animation-delay: -1s;\n}\n.lds-spinner div:nth-child(3) {\n  transform: rotate(60deg);\n  animation-delay: -0.9s;\n}\n.lds-spinner div:nth-child(4) {\n  transform: rotate(90deg);\n  animation-delay: -0.8s;\n}\n.lds-spinner div:nth-child(5) {\n  transform: rotate(120deg);\n  animation-delay: -0.7s;\n}\n.lds-spinner div:nth-child(6) {\n  transform: rotate(150deg);\n  animation-delay: -0.6s;\n}\n.lds-spinner div:nth-child(7) {\n  transform: rotate(180deg);\n  animation-delay: -0.5s;\n}\n.lds-spinner div:nth-child(8) {\n  transform: rotate(210deg);\n  animation-delay: -0.4s;\n}\n.lds-spinner div:nth-child(9) {\n  transform: rotate(240deg);\n  animation-delay: -0.3s;\n}\n.lds-spinner div:nth-child(10) {\n  transform: rotate(270deg);\n  animation-delay: -0.2s;\n}\n.lds-spinner div:nth-child(11) {\n  transform: rotate(300deg);\n  animation-delay: -0.1s;\n}\n.lds-spinner div:nth-child(12) {\n  transform: rotate(330deg);\n  animation-delay: 0s;\n}\n@keyframes lds-spinner {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n// loading Circle end\n.createPosts {\n  margin-left: 0em;\n  padding-right: 2%;\n  padding-bottom: 8em;\n}\n.createPost {\n  margin: 0;\n  margin-bottom: 1.5em;\n  text-align: left;\n  vertical-align: middle;\n  padding-bottom: 1.5em;\n}\n.pos_1 {\n  height: 5em;\n  position: relative;\n}\n.under {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  right: 0.1em;\n  top: 0.4em;\n  background: white;\n  border: black solid;\n  z-index: 0;\n}\n.above {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: white;\n  border: black solid;\n  z-index: 100;\n  text-align: center;\n  vertical-align: middle;\n}\n.above > .above-title {\n  position: relative;\n  top: 50%;\n  transform: translateY(-50%);\n  font-weight: bold;\n  font-size: 1.2em;\n}\n.pos_2 {\n  margin-top: 2em;\n  background: white;\n  border: black solid;\n  border-radius: 0.3em;\n  padding-top: 1em;\n  padding-bottom: 2.5em;\n  padding-left: 6%;\n}\n.createForm {\n  width: 90%;\n}\n.createForm > h4 {\n  margin-bottom: 0.3em;\n}\n.createForm > textarea {\n  width: 100%;\n  height: 12em;\n  resize: none;\n}\na {\n  text-decoration: none;\n}\n// .uploadImg-Btn {\n//   width: 8em;\n//   background: black;\n//   color: white;\n//   vertical-align: middle;\n//   text-align: center;\n//   line-height: 2.2em;\n//   border-radius: 0.3em;\n// }\n.imgUpload-Div {\n  margin-top: 1.4em;\n  margin-bottom: 1.6em;\n}\n.imgUpload-Div label {\n  cursor: pointer;\n}\n.imgUpload-A {\n  background: black;\n  color: white;\n  padding-top: 0.5em;\n  padding-bottom: 0.5em;\n  padding-left: 2em;\n  padding-right: 2em;\n  border-radius: 0.3em;\n}\n.imgUpload-A input {\n  display: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n  opacity: 0;\n}\n.imgDisplay {\n  width: 100%;\n  height: auto;\n  padding-bottom: 0;\n}\nimg {\n  width: 100%;\n  height: auto;\n  object-fit: cover;\n  border: black solid;\n  border-radius: 8pt;\n}\n.sendOutDiv {\n  width: 60%;\n  margin-left: 20%;\n  margin-top: 6%;\n}\n.sendOutA-Disable {\n  pointer-events: none;\n}\n.sendOutBtn {\n  width: 100%;\n  border: black solid;\n  border-radius: 0.3em;\n  vertical-align: middle;\n  text-align: center;\n  line-height: 2.3em;\n  background: #a8b0b9;\n  color: black;\n  font-weight: bold;\n  // box-shadow: -0.18em 0.18em 0em -0.005em black;\n}\n.sendOutBtn-Active {\n  background: #eec32a;\n  box-shadow: -0.18em 0.18em 0em -0.005em black;\n}\n</style>\n","import { render } from \"./CreatePost.vue?vue&type=template&id=4a5663a2&scoped=true\"\nimport script from \"./CreatePost.vue?vue&type=script&lang=js\"\nexport * from \"./CreatePost.vue?vue&type=script&lang=js\"\n\nimport \"./CreatePost.vue?vue&type=style&index=0&id=4a5663a2&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/social-media-platform/social-media-platform/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4a5663a2\"]])\n\nexport default __exports__"],"sourceRoot":""}