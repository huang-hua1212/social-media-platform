(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-118126d6"],{"04d1":function(t,e,n){var o=n("342f"),c=o.match(/firefox\/(\d+)/i);t.exports=!!c&&+c[1]},"0948":function(t,e,n){"use strict";n.r(e);n("4e82"),n("b0c0");var o=n("7a23"),c=function(t){return Object(o["C"])("data-v-1a8699b9"),t=t(),Object(o["A"])(),t},s={class:"container posts"},i={class:"post-Div"},r={class:"search-Div"},a={class:"search-DropDown"},u=c((function(){return Object(o["h"])("option",{value:"newest"},"最新貼文",-1)})),l=c((function(){return Object(o["h"])("option",{value:"oldest"},"最舊貼文",-1)})),d=[u,l],h={class:"search-Text"},p={class:"search-Unicon"},f={class:"pos_1"},b={class:"posterName"},m={class:"post-edit-div"},O=["onClick","onBlur"],j={class:"post-edit-btn"},v={class:"dropDonw-List-Ul"},g=["onClick"],k=c((function(){return Object(o["h"])("li",{style:{}},"刪除",-1)})),w=[k],y=c((function(){return Object(o["h"])("li",{style:{}},"編輯",-1)})),L=[y],x={class:"pos_2 content"},A={class:"pos_3"},D=["src"],U={class:"pos_4"},_=["onClick"],C={class:"pos_5"},I={class:"pos_1"},P={class:"comment-form"},T=["onUpdate:modelValue"],B=["onClick"],z=c((function(){return Object(o["h"])("div",{class:"comment-form-btn"},[Object(o["h"])("h4",null,"留言")],-1)})),H=[z],V={class:"pos_6_HeadName"},W={class:"posterName"},K={class:"postComment"},M={class:"loadingBackground"},E={class:"loading"},R=c((function(){return Object(o["h"])("div",{class:"lds-circle"},[Object(o["h"])("div")],-1)})),N=[R];function G(t,e,n,c,u,l){var k=Object(o["H"])("unicon"),y=Object(o["H"])("router-link");return Object(o["z"])(),Object(o["g"])("div",s,[Object(o["h"])("div",i,[Object(o["h"])("div",r,[Object(o["h"])("div",a,[Object(o["V"])(Object(o["h"])("select",{class:"search-Select","onUpdate:modelValue":e[0]||(e[0]=function(t){return u.sortBy=t}),onChange:e[1]||(e[1]=Object(o["W"])((function(t){return l.sort()}),["prevent"]))},d,544),[[o["O"],u.sortBy]])]),Object(o["h"])("div",h,[Object(o["V"])(Object(o["h"])("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(t){return u.searchText=t}),class:"search-Text-Input",placeholder:"搜尋貼文"},null,512),[[o["P"],u.searchText]]),Object(o["h"])("a",{type:"button",class:"search-Btn",href:"#",onClick:e[3]||(e[3]=Object(o["W"])((function(t){return l.searchByText()}),["prevent"]))},[Object(o["h"])("div",p,[Object(o["j"])(k,{name:"search",fill:["white"]})])])])]),(Object(o["z"])(!0),Object(o["g"])(o["a"],null,Object(o["G"])(u.posts,(function(n){return Object(o["z"])(),Object(o["g"])("div",{key:n,class:"post"},[Object(o["h"])("div",f,[Object(o["j"])(y,{class:"",to:"/personal-wall/".concat(n.user._id)},{default:Object(o["U"])((function(){return[Object(o["h"])("div",{class:"postHeadImg",style:Object(o["t"])([{"background-image":"url("+n.user.photo+")"},{"background-size":"cover","background-position":"center",overflow:"hidden"}])},null,4)]})),_:2},1032,["to"]),Object(o["h"])("div",b,[Object(o["h"])("h3",null,Object(o["K"])(n.user.name),1),Object(o["h"])("h5",null,Object(o["K"])(n.createdAt),1)]),Object(o["h"])("div",m,[Object(o["h"])("a",{type:"button",class:"post-edit-A",href:"#",onClick:Object(o["W"])((function(e){n.isDropDown=!t.isDropDown}),["prevent"]),onBlur:function(t){return l.closeDropDown(n)}},[Object(o["h"])("div",j,[Object(o["j"])(k,{name:"ellipsis-h",fill:["black"]})])],40,O),n.isDropDown?(Object(o["z"])(),Object(o["e"])(o["b"],{key:0,name:"fade",class:"dropDown-List"},{default:Object(o["U"])((function(){return[Object(o["h"])("ul",v,[Object(o["h"])("a",{type:"button",class:"",href:"#",onClick:Object(o["W"])((function(t){return l.deletePost(n)}),["prevent"])},w,8,g),Object(o["h"])("a",{type:"button",class:"",href:"#",onClick:e[4]||(e[4]=Object(o["W"])((function(){}),["prevent"]))},L)])]})),_:2},1024)):Object(o["f"])("",!0)])]),Object(o["h"])("div",x,[Object(o["h"])("h4",null,Object(o["K"])(n.content),1)]),Object(o["h"])("div",A,[Object(o["h"])("img",{src:n.image},null,8,D)]),Object(o["h"])("div",U,[Object(o["h"])("a",{type:"button",class:"thumbs-up-A",href:"#",onClick:Object(o["W"])((function(t){return l.addLikeOrDeleteLike(n)}),["prevent"])},[Object(o["j"])(k,{class:"thumbs-up",name:"thumbs-up",fill:[n.isLikeClicked?"royalblue":"#a6a6a6"]},null,8,["fill"])],8,_),Object(o["h"])("div",null,"  "+Object(o["K"])(n.likes),1)]),Object(o["h"])("div",C,[Object(o["h"])("div",I,[Object(o["h"])("div",{class:"postHeadImg",style:Object(o["t"])([{"background-image":"url("+u.myUserInformation.photo+")"},{width:"3.5em","padding-top":"3.5em","background-size":"cover","background-position":"center",overflow:"hidden"}])},null,4)]),Object(o["h"])("div",P,[Object(o["V"])(Object(o["h"])("input",{type:"text",class:"comment-form-text","onUpdate:modelValue":function(t){return n.comment.text=t},placeholder:"輸入留言..."},null,8,T),[[o["P"],n.comment.text]]),Object(o["h"])("a",{type:"button",class:"comment-form-A",href:"#",onClick:Object(o["W"])((function(t){return l.addComment(n)}),["prevent"])},H,8,B)])]),(Object(o["z"])(!0),Object(o["g"])(o["a"],null,Object(o["G"])(n.commentDetail,(function(t){return Object(o["z"])(),Object(o["g"])("div",{class:"pos_6",key:t},[Object(o["h"])("div",V,[Object(o["h"])("a",{type:"button",class:"",href:"#",onClick:e[5]||(e[5]=Object(o["W"])((function(){}),["prevent"]))},[Object(o["h"])("div",{class:"postHeadImg",style:Object(o["t"])([{width:"3.5em","padding-top":"3.5em","background-size":"cover","background-position":"center",overflow:"hidden"},{"background-image":"url("+t.user.photo+")"}])},null,4)]),Object(o["h"])("div",W,[Object(o["h"])("h3",null,Object(o["K"])(t.user.name),1),Object(o["h"])("h5",null,Object(o["K"])(t.updatedAt),1)])]),Object(o["h"])("div",K,[Object(o["h"])("h4",null,Object(o["K"])(t.content),1)])])})),128))])})),128)),Object(o["V"])(Object(o["h"])("div",M,null,512),[[o["Q"],u.isLoading]]),Object(o["V"])(Object(o["h"])("div",E,N,512),[[o["Q"],u.isLoading]])])])}var $=n("3835"),S=n("1da1"),J=(n("96cf"),n("ac1f"),n("5319"),n("99af"),n("d3b7"),n("159b"),n("1276"),n("caad6"),n("2532"),n("4de4"),n("bc3a")),Q=n.n(J),q={data:function(){return{comment:{text:""},imgs:["https://images.unsplash.com/photo-1518805660775-eb21eab50e1e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1331&q=80"],searchText:"",sortBy:"newest",isLoading:!1,myUserInformation:{},myUserId:"",posts:[]}},mounted:function(){this.userTokenCheck(this.getMyUserInformation),this.getPosts()},methods:{userTokenCheck:function(t){var e=this,n="".concat("https://blooming-sands-85089.herokuapp.com","/user/auth-check"),o=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");console.log("token:",o);var c="Bearer ".concat(o);Q.a.defaults.headers.common.Authorization=c,Q.a.post(n).then((function(n){console.log("res:",n),e.myUserId=n.data.userId,void 0!==t?t():e.$router.push("/login")})).catch((function(t){console.log("err:",t),e.$router.push("/login")}))},closeDropDown:function(t){setTimeout((function(){t.isDropDown=!1}),100)},getMyUserInformation:function(){var t=this,e=this.myUserId,n="".concat("https://blooming-sands-85089.herokuapp.com","/users/").concat(e);Q.a.get(n).then((function(e){var n=e.data.datas,o=n._id,c=n.photo,s=n.likePosts;t.myUserInformation={_id:o,photo:c,likePosts:s}})).catch((function(){}))},getPosts:function(){var t=this;this.isLoading=!0;var e="".concat("https://blooming-sands-85089.herokuapp.com","/posts");Q.a.get(e).then(function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.data.datas.forEach((function(t){t.createdAt_Original=t.createdAt;var e=t.createdAt.split("T"),n=Object($["a"])(e,1),o=n[0];t.createdAt=o})),t.posts=n.data.datas,t.sort(),e.next=5,t.posts.forEach(function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.isLikeClicked=n.whoLikes.includes(t.myUserId),e.next=3,n.commentDetail.forEach((function(t){t.updatedAt_Original=n.updatedAt;var e=t.updatedAt.split("T"),o=Object($["a"])(e,1),c=o[0];t.updatedAt=c}));case 3:n.comment={text:""},n.isDropDown=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:setTimeout((function(){t.isLoading=!1}),20);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){console.dir(t)}))},sort:function(){"newest"===this.sortBy?this.posts.sort((function(t,e){return new Date(e.createdAt_Original)-new Date(t.createdAt_Original)})):"oldest"===this.sortBy&&this.posts.sort((function(t,e){return new Date(t.createdAt_Original)-new Date(e.createdAt_Original)}))},searchByText:function(){var t=this;this.isLoading=!0;var e={content:this.searchText},n="https://blooming-sands-85089.herokuapp.com/posts/by-content";Q.a.post(n,e).then(function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.data.datas.forEach((function(t){t.createdAt_Original=t.createdAt;var e=t.createdAt.split("T"),n=Object($["a"])(e,1),o=n[0];t.createdAt=o})),t.posts=n.data.datas,t.sort(),e.next=5,t.posts.forEach(function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.isLikeClicked=n.whoLikes.includes(t.myUserId),e.next=3,n.commentDetail.forEach((function(t){t.updatedAt_Original=n.updatedAt;var e=t.updatedAt.split("T"),o=Object($["a"])(e,1),c=o[0];t.updatedAt=c}));case 3:n.comment={text:""},n.isDropDown=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:setTimeout((function(){t.isLoading=!1}),20);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){console.log(t)}))},addUserLikePost:function(t){var e=this,n=t,o=n._id,c="".concat("https://blooming-sands-85089.herokuapp.com","/users/").concat(this.myUserId);this.myUserInformation.likePosts.push(o);var s={likePosts:this.myUserInformation.likePosts};console.log(s),Q.a.patch(c,s).then((function(t){console.log(t),e.getMyUserInformation()})).catch((function(t){console.log(t)}))},addLike:function(t){this.addUserLikePost(t);var e=t,n=this.myUserId,o=e._id,c="".concat("https://blooming-sands-85089.herokuapp.com","/posts/").concat(o),s=e;s.likes+=1,e.isLikeClicked=!0,e.whoLikes.push(n);var i={likes:e.likes,whoLikes:e.whoLikes};Q.a.patch(c,i).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},deleteUserLikePost:function(t){var e=this,n=t,o=n._id,c="".concat("https://blooming-sands-85089.herokuapp.com","/users/").concat(this.myUserId);this.myUserInformation.likePosts=this.myUserInformation.likePosts.filter((function(t){return t!==o}));var s={likePosts:this.myUserInformation.likePosts};Q.a.patch(c,s).then((function(t){console.log(t),e.getMyUserInformation()})).catch((function(t){console.log(t)}))},deleteLike:function(t){this.deleteUserLikePost(t);var e=t,n=this.myUserId,o=e._id,c="".concat("https://blooming-sands-85089.herokuapp.com","/posts/").concat(o),s=e;s.likes-=1,e.isLikeClicked=!1,e.whoLikes=e.whoLikes.filter((function(t){return t!==n}));var i={likes:e.likes,whoLikes:e.whoLikes};Q.a.patch(c,i).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},addLikeOrDeleteLike:function(t){t.isLikeClicked?this.deleteLike(t):this.addLike(t)},addComment:function(t){var e=this;this.isLoading=!0;var n=this.myUserInformation._id,o=t._id,c="".concat("https://blooming-sands-85089.herokuapp.com","/postAddComment/").concat(o),s={user:n,content:t.comment.text};Q.a.post(c,s).then((function(){e.addCommentNum(t),e.getPosts(),e.isLoading=!1})).catch((function(t){console.log(t)}))},addCommentNum:function(t){var e=t;e.comments+=1;var n=e._id,o="".concat("https://blooming-sands-85089.herokuapp.com","/posts/").concat(n),c={comments:e.comments};Q.a.patch(o,c).then((function(){console.log("addCommentNum Success!!!!")})).catch((function(t){console.log(t)}))},deletePost:function(t){var e=this;this.isLoading=!0;var n=t._id,o="".concat("https://blooming-sands-85089.herokuapp.com","/posts/").concat(n);console.log("觸發刪除!!!!"),Q.a.delete(o).then((function(){e.getPosts()})).catch((function(t){console.log(t)}))}}},F=(n("1d38"),n("d959")),Y=n.n(F);const X=Y()(q,[["render",G],["__scopeId","data-v-1a8699b9"]]);e["default"]=X},"1d38":function(t,e,n){"use strict";n("5d31")},"4e82":function(t,e,n){"use strict";var o=n("23e7"),c=n("e330"),s=n("59ed"),i=n("7b0b"),r=n("07fa"),a=n("577e"),u=n("d039"),l=n("addb"),d=n("a640"),h=n("04d1"),p=n("d998"),f=n("2d00"),b=n("512c"),m=[],O=c(m.sort),j=c(m.push),v=u((function(){m.sort(void 0)})),g=u((function(){m.sort(null)})),k=d("sort"),w=!u((function(){if(f)return f<70;if(!(h&&h>3)){if(p)return!0;if(b)return b<603;var t,e,n,o,c="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)m.push({k:e+o,v:n})}for(m.sort((function(t,e){return e.v-t.v})),o=0;o<m.length;o++)e=m[o].k.charAt(0),c.charAt(c.length-1)!==e&&(c+=e);return"DGBEFHACIJK"!==c}})),y=v||!g||!k||!w,L=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:a(e)>a(n)?1:-1}};o({target:"Array",proto:!0,forced:y},{sort:function(t){void 0!==t&&s(t);var e=i(this);if(w)return void 0===t?O(e):O(e,t);var n,o,c=[],a=r(e);for(o=0;o<a;o++)o in e&&j(c,e[o]);l(c,L(t)),n=c.length,o=0;while(o<n)e[o]=c[o++];while(o<a)delete e[o++];return e}})},"512c":function(t,e,n){var o=n("342f"),c=o.match(/AppleWebKit\/(\d+)\./);t.exports=!!c&&+c[1]},"5d31":function(t,e,n){},addb:function(t,e,n){var o=n("4dae"),c=Math.floor,s=function(t,e){var n=t.length,a=c(n/2);return n<8?i(t,e):r(t,s(o(t,0,a),e),s(o(t,a),e),e)},i=function(t,e){var n,o,c=t.length,s=1;while(s<c){o=s,n=t[s];while(o&&e(t[o-1],n)>0)t[o]=t[--o];o!==s++&&(t[o]=n)}return t},r=function(t,e,n,o){var c=e.length,s=n.length,i=0,r=0;while(i<c||r<s)t[i+r]=i<c&&r<s?o(e[i],n[r])<=0?e[i++]:n[r++]:i<c?e[i++]:n[r++];return t};t.exports=s},d998:function(t,e,n){var o=n("342f");t.exports=/MSIE|Trident/.test(o)}}]);
//# sourceMappingURL=chunk-118126d6.ff23e7d6.js.map